<table id="example" class="table table-bordered table-striped" cellspacing="0" width="100%">
    <thead>
        <tr>
            <th>编号</th>
            <th>Name</th>
            <th>GroupName</th>
            <th>ModifiedDate</th>
        </tr>
    </thead>

</table>
@section Scripts{
    <script>
        //{
        //"data": [
        //    {
        //        "DT_RowId":   "row_29",
        //        "first_name": "Fiona",
        //        "last_name":  "Green",
        //        "position":   "Chief Operating Officer (COO)",
        //        "office":     "San Francisco",
        //        "extn":       "2947",
        //        "salary":     "850000",
        //        "start_date": "2010-03-11"
        //    }
        //]
        //}
        //问题描述：服务器调用创建后返回的是个简单的
        //{
        //    errorCode:1
        //}
        //官方说需要上面的结构，我现在要找个地方构建一个上面的 要让接下来的表格刷新等后续操作可以继续
        var editor; // use a global for the submit and return data rendering in the examples

        $(document).ready(function () {
            editor = new $.fn.dataTable.Editor({
                ajax: {
                    create: {
                        url: coreweb.servicesUrl + '/api/Department/AddDepartment',
                        type: 'POST',
                        data: function (data) {
                            return { name: data.data[0]['name'], groupName: data.data[0]['groupName'] };
                        }
                    }
                },
                table: "#example",
                idSrc: "departmentID",
                fields: [{
                        label: "名称:",
                        name: "name"
                    },
                    {
                        label: "名称:",
                        name: "groupName"
                    }
                ]
            });

            $('#example').DataTable({
                dom: "Bfrtip",
                ajax: {
                    type: 'POST',
                    url: coreweb.servicesUrl + '/api/Department/GetDepartmentsByPage',
                    data: function (d) {
                        return { start: d.start, length: d.length, search: d.search.value };
                    },
                    dataSrc: function (data) {
                        return data.data;
                    }
                },
                serverSide: true,
                columns: [
                    { data: 'departmentID' },
                    { data: 'name' },
                    { data: 'groupName' },
                    { data: 'modifiedDate' }
                ],
                select: true,
                buttons: [
                    { extend: "create", editor: editor },
                    { extend: "edit", editor: editor },
                    { extend: "remove", editor: editor }
                ]
            });
        });
    </script>
}
